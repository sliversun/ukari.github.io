<html>
  <head>
    <title id="title">blog</title>
  </head>
  <body>
    <div id="notification"></div>
  </body>
</html>
<script src="js/request.js" type="text/javascript"></script>
<script src="js/js.cookie.js" type="text/javascript"></script>
<script language="javascript">
  base_request("GET", "http://"+window.location.host+"/config.json", undefined, load_config, document.getElementById("notification"));

function load_config(data, target)
{
  var list = Object.keys(data);
  for (var i in list) {
    var v = list[i];
    Cookies.set(v, data[v]);
    target.innerHTML += "load config: "+v+" = "+data[v]+newline();
  }
}

base_request("GET", gist_url(), undefined, get_gists, undefined);

function get_gists(data)
{
  var file = data[0];
  var b = new article(file);
  console.log(b.title+" "+b.raw_url);
}

function article(file)
{
  var gist = file["files"][Object.keys(file["files"])];
  this.title = gist["filename"];
  this.raw_url = gist["raw_url"];
  this.description = file["description"];
}

function gist_url()
{
  var github_username = Cookies.get("github_username");
  var gist_url = "https://api.github.com/users/"+github_username+"/gists";
  return gist_url;
}

function newline()
{
  return "<br>";
}

</script>
